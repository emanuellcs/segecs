{"ast":null,"code":"var _jsxFileName = \"C:\\\\DevProjects\\\\segecs\\\\client\\\\src\\\\pages\\\\CadastroUsuarios.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FaUserFriends } from 'react-icons/fa';\nimport UsuariosForm from '../components/UsuariosForm';\nimport UsuariosList from '../components/UsuariosList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CadastroUsuarios() {\n  _s();\n  const [usuarios, setUsuarios] = useState([]);\n  const [niveis, setNiveis] = useState([]);\n  const [editandoId, setEditandoId] = useState(null);\n  const [refresh, setRefresh] = useState(0);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    // Carrega níveis para o formulário\n    fetch('/api/niveis', {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => setNiveis(data)).catch(err => console.error(\"Erro ao carregar níveis\", err));\n  }, []);\n  const handleEditClick = user => setEditandoId(user.id_usuario);\n  const handleCancelEdit = () => setEditandoId(null);\n  const handleSuccess = () => {\n    setRefresh(refresh + 1);\n    setEditandoId(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8 max-w-6xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(FaUserFriends, {\n        className: \"text-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), \"Gerenciar Usu\\xE1rios\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UsuariosForm, {\n      onSuccess: handleSuccess,\n      usuarioParaEditar: usuarios.find(u => u.id_usuario === editandoId),\n      onCancel: handleCancelEdit,\n      niveis: niveis\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UsuariosList, {\n      refresh: refresh,\n      onEditClick: handleEditClick,\n      setUsuarios: setUsuarios // Passa a função para preencher a lista\n      ,\n      usuarios: usuarios // Passa a lista atual para desenhar a tabela\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_s(CadastroUsuarios, \"KOsQoL0P5tE08fvKmxyW9ai2W1U=\");\n_c = CadastroUsuarios;\nexport default CadastroUsuarios;\nvar _c;\n$RefreshReg$(_c, \"CadastroUsuarios\");","map":{"version":3,"names":["React","useState","useEffect","FaUserFriends","UsuariosForm","UsuariosList","jsxDEV","_jsxDEV","CadastroUsuarios","_s","usuarios","setUsuarios","niveis","setNiveis","editandoId","setEditandoId","refresh","setRefresh","token","localStorage","getItem","fetch","headers","then","res","json","data","catch","err","console","error","handleEditClick","user","id_usuario","handleCancelEdit","handleSuccess","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSuccess","usuarioParaEditar","find","u","onCancel","onEditClick","_c","$RefreshReg$"],"sources":["C:/DevProjects/segecs/client/src/pages/CadastroUsuarios.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FaUserFriends } from 'react-icons/fa';\r\nimport UsuariosForm from '../components/UsuariosForm';\r\nimport UsuariosList from '../components/UsuariosList';\r\n\r\nfunction CadastroUsuarios() {\r\n  const [usuarios, setUsuarios] = useState([]);\r\n  const [niveis, setNiveis] = useState([]);\r\n  const [editandoId, setEditandoId] = useState(null);\r\n  const [refresh, setRefresh] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    // Carrega níveis para o formulário\r\n    fetch('/api/niveis', { headers: { 'Authorization': `Bearer ${token}` } })\r\n      .then(res => res.json())\r\n      .then(data => setNiveis(data))\r\n      .catch(err => console.error(\"Erro ao carregar níveis\", err));\r\n  }, []);\r\n\r\n  const handleEditClick = (user) => setEditandoId(user.id_usuario);\r\n  const handleCancelEdit = () => setEditandoId(null);\r\n  const handleSuccess = () => {\r\n    setRefresh(refresh + 1);\r\n    setEditandoId(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-8 max-w-6xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\r\n        <FaUserFriends className=\"text-blue-600\" />\r\n        Gerenciar Usuários\r\n      </h1>\r\n\r\n      <UsuariosForm\r\n        onSuccess={handleSuccess}\r\n        usuarioParaEditar={usuarios.find(u => u.id_usuario === editandoId)} \r\n        onCancel={handleCancelEdit}\r\n        niveis={niveis}\r\n      />\r\n\r\n      <UsuariosList\r\n        refresh={refresh}\r\n        onEditClick={handleEditClick}\r\n        setUsuarios={setUsuarios} // Passa a função para preencher a lista\r\n        usuarios={usuarios}       // Passa a lista atual para desenhar a tabela\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CadastroUsuarios;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,OAAOC,YAAY,MAAM,4BAA4B;AACrD,OAAOC,YAAY,MAAM,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtD,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAC1B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACW,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC;EAEzCC,SAAS,CAAC,MAAM;IACd,MAAMgB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C;IACAC,KAAK,CAAC,aAAa,EAAE;MAAEC,OAAO,EAAE;QAAE,eAAe,EAAE,UAAUJ,KAAK;MAAG;IAAE,CAAC,CAAC,CACtEK,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAIb,SAAS,CAACa,IAAI,CAAC,CAAC,CAC7BC,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC,CAAC;EAChE,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,eAAe,GAAIC,IAAI,IAAKjB,aAAa,CAACiB,IAAI,CAACC,UAAU,CAAC;EAChE,MAAMC,gBAAgB,GAAGA,CAAA,KAAMnB,aAAa,CAAC,IAAI,CAAC;EAClD,MAAMoB,aAAa,GAAGA,CAAA,KAAM;IAC1BlB,UAAU,CAACD,OAAO,GAAG,CAAC,CAAC;IACvBD,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,oBACER,OAAA;IAAK6B,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpC9B,OAAA;MAAI6B,SAAS,EAAC,+DAA+D;MAAAC,QAAA,gBAC3E9B,OAAA,CAACJ,aAAa;QAACiC,SAAS,EAAC;MAAe;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,yBAE7C;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAELlC,OAAA,CAACH,YAAY;MACXsC,SAAS,EAAEP,aAAc;MACzBQ,iBAAiB,EAAEjC,QAAQ,CAACkC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACZ,UAAU,KAAKnB,UAAU,CAAE;MACnEgC,QAAQ,EAAEZ,gBAAiB;MAC3BtB,MAAM,EAAEA;IAAO;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChB,CAAC,eAEFlC,OAAA,CAACF,YAAY;MACXW,OAAO,EAAEA,OAAQ;MACjB+B,WAAW,EAAEhB,eAAgB;MAC7BpB,WAAW,EAAEA,WAAY,CAAC;MAAA;MAC1BD,QAAQ,EAAEA,QAAS,CAAO;IAAA;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3B,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAAChC,EAAA,CA5CQD,gBAAgB;AAAAwC,EAAA,GAAhBxC,gBAAgB;AA8CzB,eAAeA,gBAAgB;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}